<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Request a Quote | Alokah Ventures Limited</title>
  <meta name="description" content="Request a professional quotation from Alokah Ventures Limited for logistics, freight, warehousing, and supply chain services.">

  <!-- SEO / Social Sharing -->
  <meta property="og:title" content="Request a Quote | Alokah Ventures Limited">
  <meta property="og:description" content="Get a professional quotation tailored to your logistics and supply chain needs.">
  <meta property="og:image" content="assets/images/og-home.jpg">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.alokahventures.com/quotation.html">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Fonts & Icons -->
  <link rel="stylesheet" href="alokahstyle.css">
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
</head>
<body>
  <!-- ==========================
     NAVIGATION
========================== -->
<nav class="main-nav">
  <div class="nav-logo">
    <a href="index.html"><img src="assets/images/logo_nobg.png" alt="Alokah Ventures Logo"></a>
  </div>

  <!-- Mobile Menu Toggle -->
 <div class="menu-toggle" onclick="toggleMenu()">
  <i class="fas fa-bars"></i>
</div>

  <!-- Nav Links -->
  <ul class="nav-links" id="nav-links">
    <li><a href="index.html">HOME</a></li>
    <li><a href="ourservices.html">SERVICES</a></li>
    <li><a href="ourpartners.html">OUR PARTNERS</a></li>
    <li><a href="#contact">CONTACT</a></li>
  </ul>
</nav>
<main>
<section class="quotation-form-page">
  <!-- Header with Logo and Company Details -->
  <header class="quotation-header">
    <div class="logo">
      <img src="assets/images/logo_nobg.png" alt="Alokah Ventures Logo">
    </div>
    <div class="company-details">
      <h1>Alokah Ventures Limited</h1>
      <p>Professional Logistics & Supply Chain Solutions</p>
      <p>P.O Box 26189, Kampala, Uganda | +256 757099800 | info@alokahventures.com</p>
    </div>
  </header>

  <!-- Main Form Content -->
  <div class="form-container">
    <h2>Quotation Request Form</h2>
    <form id="quotationForm" autocomplete="off">
      <div class="form-row">
        <div>
          <label for="fullname">Full Name *</label>
          <input type="text" id="fullname" name="fullname" required>
        </div>
        <div>
          <label for="company">Company/Organization *</label>
          <input type="text" id="company" name="company" required>
        </div>
      </div>

      <div class="form-row">
        <div>
          <label for="email">Email Address *</label>
          <input type="email" id="email" name="email" required>
        </div>
        <div>
          <label for="phone">Phone Number *</label>
          <input type="tel" id="phone" name="phone" placeholder="+256 700 000000" required>
        </div>
      </div>

      <div class="form-row">
        <div>
          <label for="service">Service Required *</label>
          <select id="service" name="service" required>
            <option value="">-- Select a Service --</option>
            <option>Air Freight</option>
            <option>Sea Freight</option>
            <option>Land Freight</option>
            <option>Warehousing</option>
            <option>Customs Clearance</option>
            <option>Supply Chain Consultancy</option>
          </select>
        </div>
        <div>
          <label for="urgency">Urgency *</label>
          <select id="urgency" name="urgency" required>
            <option value="">-- Select Urgency --</option>
            <option>Standard (3-7 days)</option>
            <option>Express (1-2 days)</option>
            <option>Immediate</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div>
          <label for="origin">Origin Location *</label>
          <input type="text" id="origin" name="origin" placeholder="City, Country" required>
        </div>
        <div>
          <label for="destination">Destination Location *</label>
          <input type="text" id="destination" name="destination" placeholder="City, Country" required>
        </div>
      </div>

      <div class="form-row">
        <div>
          <label for="weight">Cargo Weight (kg) *</label>
          <input type="number" id="weight" name="weight" min="1" required>
        </div>
        <div>
          <label for="volume">Cargo Volume (m¬≥)</label>
          <input type="number" id="volume" name="volume" min="0">
        </div>
      </div>

      <div>
        <label for="description">Cargo Description *</label>
        <textarea id="description" name="description" placeholder="Describe the cargo type, packaging, special requirements..." required></textarea>
      </div>

      <div>
        <label for="instructions">Additional Instructions</label>
        <textarea id="instructions" name="instructions" placeholder="E.g., fragile goods, temperature control, delivery deadline..."></textarea>
      </div>

      <!-- PDF Download Option -->
      <div class="form-row">
        <label>
          <input type="checkbox" id="downloadPDF" name="downloadPDF">
          Download a PDF copy of this form
        </label>
      </div>

      <!-- Honeypot anti-spam field -->
      <input type="text" name="website_hp" id="website_hp" class="hidden-honeypot" tabindex="-1" autocomplete="off">

      <!-- Feedback Message -->
      <div id="quoteFormMessage" tabindex="-1" style="display:none;"></div>

      <!-- Submit Button -->
      <button type="submit">Submit Request</button>
    </form>
  </div>
</section>
</main>

   <!-- ==========================
     FOOTER
========================== -->
<footer class="footer">
  <div class="footer-container">

    <div class="footer-sections">

      <!-- CONNECT / SOCIAL LINKS -->
      <div class="footer-column connect">
        <p class="footer-title">Connect with us:</p>
        <div class="social-links">
          <a href="https://x.com/YourPage" target="_blank" aria-label="X (Twitter)" class="x"><i class="fab fa-x-twitter"></i></a>
          <a href="https://facebook.com/YourPage" target="_blank" aria-label="Facebook" class="facebook"><i class="fab fa-facebook-f"></i></a>
          <a href="https://www.instagram.com/YourPage" target="_blank" aria-label="Instagram" class="instagram"><i class="fab fa-instagram"></i></a>
          <a href="https://www.linkedin.com/company/YourPage" target="_blank" aria-label="LinkedIn" class="linkedin"><i class="fab fa-linkedin-in"></i></a>
        </div>
      </div>

      <!-- QUICK LINKS (desktop only) -->
      <div class="footer-column quick-links">
        <p class="footer-title">Quick Links</p>
        <ul class="footer-links">
          <li><a href="#home">Home</a></li>
          <li><a href="#about">About Us</a></li>
          <li><a href="#services">Services</a></li>
          <li><a href="#supplychain">Supply Chain</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div>

      <!-- LEGAL LINKS (mobile only) -->
      <div class="footer-column legal-links">
        <p class="footer-title">Legal</p>
        <ul class="footer-links">
          <li><a href="privacy.html">Privacy Policy</a></li>
          <li><a href="terms&conditions.html">Terms & Conditions</a></li>
          <li><a href="cookies.html">Cookies</a></li>
        </ul>
      </div>

      <!-- MAP -->
      <div class="footer-column map">
        <p class="footer-title">Our Location</p>
        <iframe
          src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d7979.510729920837!2d32.620841544183925!3d0.3218682031019067!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8d2aaf2035495af5%3A0xd37c92187dacba0b!2sALOKAH%20VENTURES%20LIMITED!5e0!3m2!1sen!2sus!4v1760099897282!5m2!1sen!2sus"
          allowfullscreen=""
          loading="lazy"
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>

    </div> <!-- /.footer-sections -->

    <!-- FOOTER BOTTOM -->
    <div class="footer-bottom">
      <p>&copy; 2025 Alokah Ventures Limited. All Rights Reserved.</p>
    </div>

  </div> <!-- /.footer-container -->
</footer>


 <!-- EmailJS SDK -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<!-- jsPDF for PDF download -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- JS for menu and quotation form -->
<script>
  // Toggle navigation menu
  function toggleMenu() {
    document.querySelector('.nav-links').classList.toggle('active');
  }

  // Initialize EmailJS
  (function() {
    emailjs.init({
      publicKey: "Gzr0d4tNcndWpcLWa", // üîπ Replace with your actual EmailJS public key
    });
  })();

  document.addEventListener("DOMContentLoaded", () => {
    const quotationForm = document.getElementById("quotationForm");
    if (quotationForm) {
      const formMessage = document.getElementById("quoteFormMessage");
      formMessage.setAttribute("role", "alert");
      formMessage.setAttribute("aria-live", "assertive");

      quotationForm.addEventListener("submit", async (e) => {
        e.preventDefault();

        const submitBtn = quotationForm.querySelector("button[type='submit']");
        submitBtn.disabled = true;
        formMessage.style.display = "none";

        try {
          const formData = new FormData(quotationForm);

          // üõ°Ô∏è Honeypot check
          if (formData.get("website_hp")) throw new Error("Spam detected");

          // ‚úÖ Validation
          if (!formData.get("fullname") || formData.get("fullname").length < 2)
            throw new Error("Enter your full name (min 2 characters)");
          if (!formData.get("company") || formData.get("company").length < 2)
            throw new Error("Enter your company/organization");
          if (!formData.get("email") || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(formData.get("email")))
            throw new Error("Enter a valid email address");
          if (!formData.get("phone") || !/^[\d\s()+-]{7,}$/.test(formData.get("phone")))
            throw new Error("Enter a valid phone number");
          if (!formData.get("service")) throw new Error("Select a service");
          if (!formData.get("urgency")) throw new Error("Select urgency");
          if (!formData.get("origin") || !formData.get("destination"))
            throw new Error("Specify origin and destination");
          if (!formData.get("weight") || isNaN(formData.get("weight")) || Number(formData.get("weight")) < 1)
            throw new Error("Enter a valid cargo weight (min 1kg)");
          if (formData.get("volume") && (isNaN(formData.get("volume")) || Number(formData.get("volume")) < 0))
            throw new Error("Enter a valid cargo volume");
          if (!formData.get("description") || formData.get("description").length < 10)
            throw new Error("Cargo description must be at least 10 characters");

          // üåç Optional IP fetch
          let ip = "";
          try {
            const ipResp = await fetch("https://api64.ipify.org?format=json");
            ip = (await ipResp.json()).ip;
          } catch {}

          // üì® Prepare EmailJS parameters
          const templateParams = {
            name: formData.get("fullname"),
            company: formData.get("company"),
            email: formData.get("email"),
            phone: formData.get("phone"),
            service: formData.get("service"),
            urgency: formData.get("urgency"),
            origin: formData.get("origin"),
            destination: formData.get("destination"),
            weight: formData.get("weight"),
            volume: formData.get("volume"),
            description: formData.get("description"),
            instructions: formData.get("instructions"),
            time: new Date().toLocaleString(),
            ip_address: ip,
          };

          // ‚úâÔ∏è Send via EmailJS
          const result = await emailjs.send(
            "service_dfawmla",         // Service ID
            "template_uc8mmjo",        // Template ID
            templateParams
          );

          if (result.status === 200) {
            showMessage("Your quotation request was sent successfully!", "success");

            // üßæ Generate PDF if checkbox is selected
            const downloadPDF = document.getElementById("downloadPDF");
            if (downloadPDF && downloadPDF.checked) {
              generatePDF(templateParams);
            }

            quotationForm.reset();
          } else {
            throw new Error("Failed to send email. Please try again.");
          }

        } catch (err) {
          showMessage(err.message, "error");
        } finally {
          setTimeout(() => { submitBtn.disabled = false; }, 2000);
        }

        // ‚úÖ Show message feedback
        function showMessage(msg, type = "success") {
          formMessage.style.display = "block";
          formMessage.style.color = type === "success" ? "green" : "red";
          formMessage.textContent = msg;
          formMessage.focus();
          if (type === "success") setTimeout(() => { formMessage.style.display = "none"; }, 6000);
        }

        // Generate a professional PDF copy
async function generatePDF() {
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF();

  // === HEADER SECTION ===
  const logo = document.querySelector(".quotation-header .logo img").src;
  const companyName = document.querySelector(".company-details h1").textContent;
  const tagline = document.querySelector(".company-details p:nth-child(2)").textContent;
  const contactInfo = document.querySelector(".company-details p:nth-child(3)").textContent;

  // Add Logo
  try {
    const img = await loadImage(logo);
    pdf.addImage(img, "PNG", 10, 10, 30, 30); // (image, format, x, y, width, height)
  } catch (err) {
    console.warn("Logo not loaded in PDF:", err);
  }

  // Company Info
  pdf.setFont("helvetica", "bold");
  pdf.setFontSize(16);
  pdf.text(companyName, 50, 20);
  pdf.setFont("helvetica", "normal");
  pdf.setFontSize(11);
  pdf.text(tagline, 50, 27);
  pdf.text(contactInfo, 50, 34);

  // Divider line
  pdf.setLineWidth(0.5);
  pdf.line(10, 42, 200, 42);

  // === FORM DETAILS ===
  pdf.setFont("helvetica", "bold");
  pdf.setFontSize(14);
  pdf.text("Quotation Request Details", 10, 52);
  pdf.setFont("helvetica", "normal");
  pdf.setFontSize(11);

  const formFields = [
    { label: "Full Name", id: "fullname" },
    { label: "Company/Organization", id: "company" },
    { label: "Email Address", id: "email" },
    { label: "Phone Number", id: "phone" },
    { label: "Service Required", id: "service" },
    { label: "Urgency", id: "urgency" },
    { label: "Origin Location", id: "origin" },
    { label: "Destination Location", id: "destination" },
    { label: "Cargo Weight (kg)", id: "weight" },
    { label: "Cargo Volume (m¬≥)", id: "volume" },
    { label: "Cargo Description", id: "description" },
    { label: "Additional Instructions", id: "instructions" },
  ];

  let y = 62; // start position for form data

  formFields.forEach(field => {
    const element = document.getElementById(field.id);
    const value = element ? element.value.trim() || "N/A" : "N/A";

    // Wrap long text fields
    const lines = pdf.splitTextToSize(`${field.label}: ${value}`, 180);
    pdf.text(lines, 10, y);
    y += lines.length * 7;

    // Add page if near bottom
    if (y > 270) {
      pdf.addPage();
      y = 20;
    }
  });

  // === FOOTER ===
  pdf.setFontSize(10);
  pdf.setTextColor(100);
  pdf.text("Generated by Alokah Ventures Limited Quotation System", 10, 285);
  pdf.text(new Date().toLocaleString(), 150, 285);

  // Save PDF
  pdf.save("Quotation_Request_Alokah.pdf");

  // Helper function to convert image to base64
  function loadImage(url) {
    return new Promise((resolve, reject) => {
      const img = new Image();
      img.crossOrigin = "anonymous";
      img.onload = () => {
        const canvas = document.createElement("canvas");
        canvas.width = img.width;
        canvas.height = img.height;
        const ctx = canvas.getContext("2d");
        ctx.drawImage(img, 0, 0);
        resolve(canvas.toDataURL("image/png"));
      };
      img.onerror = reject;
      img.src = url;
    });
  }
}

</script>

</body>
</html>
